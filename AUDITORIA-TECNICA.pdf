%PDF-1.3
%ºß¬à
3 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 4 0 R
>>
endobj
4 0 obj
<<
/Length 1847
>>
stream
0.5670000000000001 w
0 G
1. 0.4 0. rg
0. 841.8899999999999864 595.2799999999999727 -226.7716535433071101 re
f
BT
/F2 28 Tf
32.1999999999999957 TL
1. g
153.9999999999999432 756.8506299212598378 Td
(AUDITORIA TECNICA) Tj
ET
BT
/F2 24 Tf
27.5999999999999979 TL
1. g
216.3999999999999488 708.6616535433070112 Td
(ANNALOGICA) Tj
ET
BT
/F1 12 Tf
13.7999999999999989 TL
1. g
195.9399999999999125 666.1419685039369369 Td
(Analisis Tecnico Detallado con Codigo) Tj
ET
BT
/F2 10 Tf
11.5 TL
0. g
42.5196850393700814 586.7718897637794271 Td
(Fecha: 2025-10-10) Tj
ET
BT
/F2 10 Tf
11.5 TL
0. g
42.5196850393700814 569.7640157480313974 Td
(Version: 1.0.0) Tj
ET
BT
/F2 10 Tf
11.5 TL
0. g
42.5196850393700814 552.7561417322833677 Td
(Tipo: Documento Tecnico) Tj
ET
0.94 0.97 1. rg
42.5196850393700814 524.4096850393700606 510.2406299212597673 -99.2125984251968589 re
f
0.27 0.51 0.71 RG
1.4173228346456694 w
42.5196850393700814 524.4096850393700606 510.2406299212597673 -99.2125984251968589 re
S
BT
/F2 11 Tf
12.6499999999999986 TL
0. g
56.6929133858267775 501.7325196850393354 Td
(RESUMEN TECNICO) Tj
ET
BT
/F1 9 Tf
10.3499999999999996 TL
0. g
56.6929133858267775 481.8899999999999295 Td
(14 problemas criticos identificados) Tj
ET
BT
/F1 9 Tf
10.3499999999999996 TL
0. g
56.6929133858267775 467.716771653543276 Td
(Esfuerzo estimado: 50-60 horas desarrollo) Tj
ET
BT
/F1 9 Tf
10.3499999999999996 TL
0. g
56.6929133858267775 453.5435433070865656 Td
(Tiempo total: 3-4 semanas \(con legal\)) Tj
ET
BT
/F1 9 Tf
10.3499999999999996 TL
0. g
56.6929133858267775 439.3703149606298552 Td
(Prioridad maxima: GDPR + Seguridad) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
270.9599999999999795 28.3464566929134207 Td
(Pagina 1 de 12) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
42.5196850393700814 28.3464566929134207 Td
(Annalogica - Auditoria Tecnica 2025) Tj
ET
endstream
endobj
5 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 6 0 R
>>
endobj
6 0 obj
<<
/Length 7408
>>
stream
1.4173228346456694 w
0.27 0.51 0.71 RG
BT
/F2 16 Tf
18.3999999999999986 TL
1. 0.4 0. rg
42.5196850393700814 799.3703149606299121 Td
(1. SEGURIDAD - PROBLEMA CRITICO #1) Tj
ET
0.78 G
0.8503937007874016 w
42.5196850393700814 772.1577165354329964 m
552.7603149606298985 772.1577165354329964 l
S
BT
/F2 13 Tf
14.9499999999999993 TL
0.863 0.208 0.271 rg
42.5196850393700814 757.9844881889763428 Td
(Tokens JWT en localStorage \(Vulnerable a XSS\)) Tj
ET
0.78 G
0.8503937007874016 w
42.5196850393700814 735.8742519685039269 m
552.7603149606298985 735.8742519685039269 l
S
BT
/F2 9 Tf
10.3499999999999996 TL
0. g
42.5196850393700814 721.7010236220471597 Td
(UBICACION: app/api/auth/login/route.ts:55) Tj
ET
BT
/F1 9 Tf
10.3499999999999996 TL
0. g
42.5196850393700814 703.2758267716535556 Td
(RIESGO: Si hay vulnerabilidad XSS, el atacante puede robar tokens.) Tj
ET
BT
/F2 9 Tf
10.3499999999999996 TL
0.275 g
42.5196850393700814 676.346692913385823 Td
(Codigo Actual \(Vulnerable\):) Tj
ET
0.96 g
42.5196850393700814 662.1734645669290558 510.2406299212597673 -66.6141732283464592 re
f
0.78 G
0.5669291338582678 w
42.5196850393700814 662.1734645669290558 510.2406299212597673 -66.6141732283464592 re
S
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 650.8348818897636647 Td
(// ACTUAL \(INSEGURO\):) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 640.9136220472440755 Td
(return NextResponse.json\({) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 630.9923622047243725 Td
(  token,  // Token expuesto en JavaScript) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 621.0711023622046696 Td
(  user: { id: user.id, email: user.email }) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 611.1498425196849666 Td
(}\);) Tj
ET
BT
/F2 9 Tf
10.3499999999999996 TL
0.275 g
42.5196850393700814 584.2207086614173477 Td
(Solucion Recomendada:) Tj
ET
0.96 g
42.5196850393700814 570.0474803149605805 510.2406299212597673 -155.9055118110236435 re
f
0.78 G
0.5669291338582678 w
42.5196850393700814 570.0474803149605805 510.2406299212597673 -155.9055118110236435 re
S
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 558.7088976377951894 Td
(// RECOMENDADO \(SEGURO\):) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 548.7876377952754865 Td
(const response = NextResponse.json\({) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 538.8663779527557836 Td
(  user: { id: user.id, email: user.email }) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 528.9451181102360806 Td
(}\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 509.1025984251967884 Td
(response.cookies.set\('auth_token', token, {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 499.1813385826770855 Td
(  httpOnly: true,      // No accesible desde JavaScript) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 489.2600787401574394 Td
(  secure: true,        // Solo HTTPS) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 479.3388188976377364 Td
(  sameSite: 'strict',  // Proteccion CSRF) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 469.4175590551180335 Td
(  maxAge: 7 * 24 * 60 * 60, // 7 dias) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 459.4962992125983305 Td
(  path: '/') Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 449.5750393700786844 Td
(}\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 429.7325196850392786 Td
(return response;) Tj
ET
BT
/F2 9 Tf
10.3499999999999996 TL
0. g
42.5196850393700814 402.8033858267716028 Td
(CAMBIOS EN FRONTEND:) Tj
ET
BT
/F1 9 Tf
10.3499999999999996 TL
0. g
42.5196850393700814 384.378188976377885 Td
(  -) Tj
ET
BT
/F1 9 Tf
10.3499999999999996 TL
0. g
59.5275590551181182 384.378188976377885 Td
(Eliminar localStorage.setItem\("token"\)) Tj
ET
BT
/F1 9 Tf
10.3499999999999996 TL
0. g
42.5196850393700814 371.6222834645668627 Td
(  -) Tj
ET
BT
/F1 9 Tf
10.3499999999999996 TL
0. g
59.5275590551181182 371.6222834645668627 Td
(Cookies se envian automaticamente en requests) Tj
ET
BT
/F1 9 Tf
10.3499999999999996 TL
0. g
42.5196850393700814 358.8663779527558404 Td
(  -) Tj
ET
BT
/F1 9 Tf
10.3499999999999996 TL
0. g
59.5275590551181182 358.8663779527558404 Td
(Verificacion en middleware de Next.js) Tj
ET
BT
/F2 9 Tf
10.3499999999999996 TL
0.275 g
42.5196850393700814 331.9372440944881077 Td
(Middleware para Rutas Protegidas:) Tj
ET
0.96 g
42.5196850393700814 317.7640157480313974 510.2406299212597673 -245.1968503937007995 re
f
0.78 G
0.5669291338582678 w
42.5196850393700814 317.7640157480313974 510.2406299212597673 -245.1968503937007995 re
S
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 306.4254330708660063 Td
(// middleware.ts \(NUEVO\)) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 296.5041732283464171 Td
(import { NextResponse } from 'next/server';) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 286.5829133858267141 Td
(import type { NextRequest } from 'next/server';) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 276.6616535433070112 Td
(import jwt from 'jsonwebtoken';) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 256.8191338582676053 Td
(export function middleware\(request: NextRequest\) {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 246.8978740157479024 Td
(  const token = request.cookies.get\('auth_token'\)?.value;) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 227.0553543307086102 Td
(  if \(!token\) {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 217.1340944881889072 Td
(    return NextResponse.redirect\(new URL\('/login', request.url\)\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 207.2128346456692043 Td
(  }) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 187.3703149606297984 Td
(  try {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 177.4490551181100955 Td
(    jwt.verify\(token, process.env.JWT_SECRET!\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 167.5277952755905062 Td
(    return NextResponse.next\(\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 157.6065354330708033 Td
(  } catch {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 147.6852755905511003 Td
(    return NextResponse.redirect\(new URL\('/login', request.url\)\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 137.7640157480313974 Td
(  }) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 127.8427559055116944 Td
(}) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 108.0002362204724022 Td
(export const config = {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 98.0789763779526993 Td
(  matcher: ['/dashboard/:path*', '/settings/:path*']) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 88.1577165354329964 Td
(};) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
270.9599999999999795 28.3464566929134207 Td
(Pagina 2 de 12) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
42.5196850393700814 28.3464566929134207 Td
(Annalogica - Auditoria Tecnica 2025) Tj
ET
endstream
endobj
7 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 8 0 R
>>
endobj
8 0 obj
<<
/Length 426
>>
stream
0.5669291338582678 w
0.78 G
BT
/F2 9 Tf
10.3499999999999996 TL
0.863 0.208 0.271 rg
42.5196850393700814 799.3703149606299121 Td
(IMPACTO: Alto | PRIORIDAD: CRITICA | TIEMPO: 2 horas) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
270.9599999999999795 28.3464566929134207 Td
(Pagina 3 de 12) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
42.5196850393700814 28.3464566929134207 Td
(Annalogica - Auditoria Tecnica 2025) Tj
ET
endstream
endobj
9 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 10 0 R
>>
endobj
10 0 obj
<<
/Length 7350
>>
stream
0.5669291338582678 w
0.78 G
BT
/F2 16 Tf
18.3999999999999986 TL
1. 0.4 0. rg
42.5196850393700814 799.3703149606299121 Td
(2. SEGURIDAD - PROBLEMA CRITICO #2) Tj
ET
0.78 G
0.8503937007874016 w
42.5196850393700814 772.1577165354329964 m
552.7603149606298985 772.1577165354329964 l
S
BT
/F2 13 Tf
14.9499999999999993 TL
0.863 0.208 0.271 rg
42.5196850393700814 757.9844881889763428 Td
(Sin Content Security Policy \(CSP\)) Tj
ET
0.78 G
0.8503937007874016 w
42.5196850393700814 735.8742519685039269 m
552.7603149606298985 735.8742519685039269 l
S
BT
/F2 9 Tf
10.3499999999999996 TL
0. g
42.5196850393700814 721.7010236220471597 Td
(UBICACION: next.config.ts:3) Tj
ET
BT
/F1 9 Tf
10.3499999999999996 TL
0. g
42.5196850393700814 703.2758267716535556 Td
(RIESGO: Code injection, clickjacking, MIME sniffing attacks.) Tj
ET
BT
/F2 9 Tf
10.3499999999999996 TL
0.275 g
42.5196850393700814 676.346692913385823 Td
(Configuracion Actual:) Tj
ET
0.96 g
42.5196850393700814 662.1734645669290558 510.2406299212597673 -76.5354330708661479 re
f
0.78 G
0.5669291338582678 w
42.5196850393700814 662.1734645669290558 510.2406299212597673 -76.5354330708661479 re
S
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 650.8348818897636647 Td
(// ACTUAL \(NO EXISTE\):) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 640.9136220472440755 Td
(const nextConfig: NextConfig = {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 630.9923622047243725 Td
(  /* config options here */) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 621.0711023622046696 Td
(};) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 601.2285826771652637 Td
(export default nextConfig;) Tj
ET
BT
/F2 9 Tf
10.3499999999999996 TL
0.275 g
42.5196850393700814 574.2994488188976447 Td
(Solucion Completa \(next.config.ts\):) Tj
ET
0.96 g
42.5196850393700814 560.1262204724408775 510.2406299212597673 -413.8582677165354653 re
f
0.78 G
0.5669291338582678 w
42.5196850393700814 560.1262204724408775 510.2406299212597673 -413.8582677165354653 re
S
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 548.7876377952754865 Td
(// RECOMENDADO:) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 538.8663779527557836 Td
(import type { NextConfig } from "next";) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 519.0238582677164914 Td
(const nextConfig: NextConfig = {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 509.1025984251967884 Td
(  async headers\(\) {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 499.1813385826770855 Td
(    return [) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 489.2600787401574394 Td
(      {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 479.3388188976377364 Td
(        source: '/:path*',) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 469.4175590551180335 Td
(        headers: [) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 459.4962992125983305 Td
(          // Previene clickjacking) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 449.5750393700786844 Td
(          {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 439.6537795275589815 Td
(            key: 'X-Frame-Options',) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 429.7325196850392786 Td
(            value: 'DENY') Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 419.8112598425196325 Td
(          },) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 409.8899999999999295 Td
(          // Previene MIME sniffing) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 399.9687401574802266 Td
(          {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 390.0474803149605805 Td
(            key: 'X-Content-Type-Options',) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 380.1262204724408775 Td
(            value: 'nosniff') Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 370.2049606299211746 Td
(          },) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 360.2837007874014716 Td
(          // Referrer policy) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 350.3624409448818255 Td
(          {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 340.4411811023621226 Td
(            key: 'Referrer-Policy',) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 330.5199212598424197 Td
(            value: 'strict-origin-when-cross-origin') Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 320.5986614173227736 Td
(          },) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 310.6774015748030706 Td
(          // Permissions policy) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 300.7561417322833677 Td
(          {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 290.8348818897636647 Td
(            key: 'Permissions-Policy',) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 280.9136220472439618 Td
(            value: 'camera=\(\), microphone=\(\), geolocation=\(\)') Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 270.9923622047243725 Td
(          },) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 261.0711023622046696 Td
(          // Content Security Policy) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 251.1498425196849666 Td
(          {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 241.2285826771652637 Td
(            key: 'Content-Security-Policy',) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 231.3073228346455608 Td
(            value: [) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 221.3860629921258578 Td
(              "default-src 'self'",) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 211.4648031496061549 Td
(              "script-src 'self' 'unsafe-eval' 'unsafe-inline'",) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 201.5435433070865656 Td
(              "style-src 'self' 'unsafe-inline'",) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 191.6222834645668627 Td
(              "img-src 'self' data: https:",) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 181.7010236220471597 Td
(              "font-src 'self'",) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 171.7797637795274568 Td
(              "connect-src 'self' https://api.anthropic.com https://api.assemblyai.com",) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 161.8585039370077538 Td
(              "frame-ancestors 'none'") Tj
ET
BT
/F2 9 Tf
10.3499999999999996 TL
0.863 0.208 0.271 rg
42.5196850393700814 134.9293700787400212 Td
(IMPACTO: Alto | PRIORIDAD: CRITICA | TIEMPO: 4 horas) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
270.9599999999999795 28.3464566929134207 Td
(Pagina 4 de 12) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
42.5196850393700814 28.3464566929134207 Td
(Annalogica - Auditoria Tecnica 2025) Tj
ET
endstream
endobj
11 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 12 0 R
>>
endobj
12 0 obj
<<
/Length 7231
>>
stream
0.5669291338582678 w
0.78 G
BT
/F2 16 Tf
18.3999999999999986 TL
1. 0.4 0. rg
42.5196850393700814 799.3703149606299121 Td
(3. INFRAESTRUCTURA - PROBLEMA CRITICO #3) Tj
ET
0.78 G
0.8503937007874016 w
42.5196850393700814 772.1577165354329964 m
552.7603149606298985 772.1577165354329964 l
S
BT
/F2 13 Tf
14.9499999999999993 TL
0.863 0.208 0.271 rg
42.5196850393700814 757.9844881889763428 Td
(Sin Circuit Breaker para APIs Externas) Tj
ET
0.78 G
0.8503937007874016 w
42.5196850393700814 735.8742519685039269 m
552.7603149606298985 735.8742519685039269 l
S
BT
/F2 9 Tf
10.3499999999999996 TL
0. g
42.5196850393700814 721.7010236220471597 Td
(UBICACION: lib/assemblyai-client.ts:44-94) Tj
ET
BT
/F1 9 Tf
10.3499999999999996 TL
0. g
42.5196850393700814 703.2758267716535556 Td
(RIESGO: Si AssemblyAI/Claude fallan, todas las transcripciones fallan.) Tj
ET
BT
/F2 9 Tf
10.3499999999999996 TL
0.275 g
42.5196850393700814 676.346692913385823 Td
(Dependencia Necesaria:) Tj
ET
0.96 g
42.5196850393700814 662.1734645669290558 510.2406299212597673 -36.8503937007874072 re
f
0.78 G
0.5669291338582678 w
42.5196850393700814 662.1734645669290558 510.2406299212597673 -36.8503937007874072 re
S
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 650.8348818897636647 Td
(// INSTALAR:) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 640.9136220472440755 Td
(npm install opossum) Tj
ET
BT
/F2 9 Tf
10.3499999999999996 TL
0.275 g
42.5196850393700814 613.9844881889763428 Td
(Implementacion Circuit Breaker:) Tj
ET
0.96 g
42.5196850393700814 599.8112598425195756 510.2406299212597673 -354.3307086614173613 re
f
0.78 G
0.5669291338582678 w
42.5196850393700814 599.8112598425195756 510.2406299212597673 -354.3307086614173613 re
S
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 588.4726771653542983 Td
(// lib/circuit-breakers.ts \(NUEVO\)) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 578.5514173228345953 Td
(import CircuitBreaker from 'opossum';) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 568.6301574803148924 Td
(import { transcribeAudio } from './assemblyai-client';) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 548.7876377952754865 Td
(const options = {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 538.8663779527557836 Td
(  timeout: 60000,              // 60s timeout) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 528.9451181102360806 Td
(  errorThresholdPercentage: 50, // Abre si 50% fallan) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 519.0238582677164914 Td
(  resetTimeout: 30000,         // Reintentar despues de 30s) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 509.1025984251967884 Td
(  volumeThreshold: 5           // Min requests antes de abrir) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 499.1813385826770855 Td
(};) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 479.3388188976377364 Td
(export const assemblyAIBreaker = new CircuitBreaker\() Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 469.4175590551180335 Td
(  transcribeAudio,) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 459.4962992125983305 Td
(  options) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 449.5750393700786844 Td
(\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 429.7325196850392786 Td
(// Fallback cuando circuito abierto) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 419.8112598425196325 Td
(assemblyAIBreaker.fallback\(\(\) => \({) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 409.8899999999999295 Td
(  error: 'AssemblyAI temporalmente no disponible. Reintenta en 30s.') Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 399.9687401574802266 Td
(}\)\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 380.1262204724408775 Td
(// Eventos para logging) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 370.2049606299211746 Td
(assemblyAIBreaker.on\('open', \(\) => {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 360.2837007874014716 Td
(  console.error\('[Circuit Breaker] OPEN - AssemblyAI fallando'\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 350.3624409448818255 Td
(  // Enviar alerta critica) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 340.4411811023621226 Td
(}\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 320.5986614173227736 Td
(assemblyAIBreaker.on\('halfOpen', \(\) => {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 310.6774015748030706 Td
(  console.warn\('[Circuit Breaker] HALF-OPEN - Probando AssemblyAI'\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 300.7561417322833677 Td
(}\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 280.9136220472439618 Td
(assemblyAIBreaker.on\('close', \(\) => {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 270.9923622047243725 Td
(  console.log\('[Circuit Breaker] CLOSED - AssemblyAI recuperado'\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 261.0711023622046696 Td
(}\);) Tj
ET
BT
/F2 9 Tf
10.3499999999999996 TL
0.275 g
42.5196850393700814 234.1419685039369369 Td
(Uso en Inngest Functions:) Tj
ET
0.96 g
42.5196850393700814 219.9687401574801981 510.2406299212597673 -126.1417322834645773 re
f
0.78 G
0.5669291338582678 w
42.5196850393700814 219.9687401574801981 510.2406299212597673 -126.1417322834645773 re
S
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 208.6301574803148924 Td
(// lib/inngest/functions.ts - MODIFICAR:) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 198.7088976377951894 Td
(import { assemblyAIBreaker } from '@/lib/circuit-breakers';) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 178.8663779527557836 Td
(// Cambiar llamada directa por circuit breaker:) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 168.9451181102360806 Td
(const transcriptionResult = await step.run\('transcribe-audio', async \(\) => {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 159.0238582677164914 Td
(  return await assemblyAIBreaker.fire\({) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 149.1025984251967884 Td
(    audioUrl,) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 139.1813385826770855 Td
(    language: 'es',) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 129.2600787401573825 Td
(    speakerLabels: true) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 119.3388188976376796 Td
(  }\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 109.4175590551180903 Td
(}\);) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
270.9599999999999795 28.3464566929134207 Td
(Pagina 5 de 12) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
42.5196850393700814 28.3464566929134207 Td
(Annalogica - Auditoria Tecnica 2025) Tj
ET
endstream
endobj
13 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 14 0 R
>>
endobj
14 0 obj
<<
/Length 426
>>
stream
0.5669291338582678 w
0.78 G
BT
/F2 9 Tf
10.3499999999999996 TL
0.863 0.208 0.271 rg
42.5196850393700814 799.3703149606299121 Td
(IMPACTO: Alto | PRIORIDAD: CRITICA | TIEMPO: 6 horas) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
270.9599999999999795 28.3464566929134207 Td
(Pagina 6 de 12) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
42.5196850393700814 28.3464566929134207 Td
(Annalogica - Auditoria Tecnica 2025) Tj
ET
endstream
endobj
15 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 16 0 R
>>
endobj
16 0 obj
<<
/Length 4662
>>
stream
0.5669291338582678 w
0.78 G
BT
/F2 16 Tf
18.3999999999999986 TL
1. 0.4 0. rg
42.5196850393700814 799.3703149606299121 Td
(4. GESTION COSTOS - PROBLEMA CRITICO #4) Tj
ET
0.78 G
0.8503937007874016 w
42.5196850393700814 772.1577165354329964 m
552.7603149606298985 772.1577165354329964 l
S
BT
/F2 13 Tf
14.9499999999999993 TL
0.863 0.208 0.271 rg
42.5196850393700814 757.9844881889763428 Td
(Sin Quotas Mensuales por Usuario) Tj
ET
0.78 G
0.8503937007874016 w
42.5196850393700814 735.8742519685039269 m
552.7603149606298985 735.8742519685039269 l
S
BT
/F2 9 Tf
10.3499999999999996 TL
0. g
42.5196850393700814 721.7010236220471597 Td
(UBICACION: lib/db.ts:3-132 \(falta campo en users\)) Tj
ET
BT
/F1 9 Tf
10.3499999999999996 TL
0. g
42.5196850393700814 703.2758267716535556 Td
(RIESGO: Usuarios pueden consumir recursos ilimitados.) Tj
ET
BT
/F2 9 Tf
10.3499999999999996 TL
0.275 g
42.5196850393700814 676.346692913385823 Td
(Migracion SQL:) Tj
ET
0.96 g
42.5196850393700814 662.1734645669290558 510.2406299212597673 -294.8031496062992574 re
f
0.78 G
0.5669291338582678 w
42.5196850393700814 662.1734645669290558 510.2406299212597673 -294.8031496062992574 re
S
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 650.8348818897636647 Td
(-- Ejecutar en Neon Postgres Console:) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 630.9923622047243725 Td
(-- 1. Agregar campos de quota) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 621.0711023622046696 Td
(ALTER TABLE users) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 611.1498425196849666 Td
(ADD COLUMN IF NOT EXISTS monthly_transcription_quota INT DEFAULT 100,) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 601.2285826771652637 Td
(ADD COLUMN IF NOT EXISTS transcriptions_used_this_month INT DEFAULT 0,) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 591.3073228346456744 Td
(ADD COLUMN IF NOT EXISTS quota_reset_date TIMESTAMP DEFAULT NOW\(\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 571.4648031496062686 Td
(-- 2. Indice para queries frecuentes) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 561.5435433070865656 Td
(CREATE INDEX IF NOT EXISTS idx_users_quota_check) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 551.6222834645668627 Td
(ON users\(id, transcriptions_used_this_month, monthly_transcription_quota\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 531.7797637795274568 Td
(-- 3. Funcion para resetear quotas mensualmente) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 521.8585039370077538 Td
(CREATE OR REPLACE FUNCTION reset_monthly_quotas\(\)) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 511.9372440944881077 Td
(RETURNS void AS $$) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 502.0159842519684616 Td
(BEGIN) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 492.0947244094487587 Td
(  UPDATE users) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 482.1734645669290558 Td
(  SET transcriptions_used_this_month = 0,) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 472.2522047244093528 Td
(      quota_reset_date = CURRENT_TIMESTAMP) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 462.3309448818897067 Td
(  WHERE quota_reset_date < NOW\(\) - INTERVAL '1 month';) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 452.4096850393700038 Td
(END;) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 442.4884251968503008 Td
($$ LANGUAGE plpgsql;) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 422.6459055118109518 Td
(-- 4. Comentarios) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 412.7246456692912489 Td
(COMMENT ON COLUMN users.monthly_transcription_quota) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 402.8033858267716028 Td
(  IS 'Numero maximo de transcripciones permitidas por mes';) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 392.8821259842518998 Td
(COMMENT ON COLUMN users.transcriptions_used_this_month) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 382.9608661417321969 Td
(  IS 'Contador de transcripciones usadas en el mes actual';) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
270.9599999999999795 28.3464566929134207 Td
(Pagina 7 de 12) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
42.5196850393700814 28.3464566929134207 Td
(Annalogica - Auditoria Tecnica 2025) Tj
ET
endstream
endobj
17 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 18 0 R
>>
endobj
18 0 obj
<<
/Length 4880
>>
stream
0.5669291338582678 w
0.78 G
BT
/F2 9 Tf
10.3499999999999996 TL
0.275 g
42.5196850393700814 799.3703149606299121 Td
(Codigo TypeScript \(lib/db.ts\):) Tj
ET
0.96 g
42.5196850393700814 785.1970866141731449 510.2406299212597673 -413.8582677165354653 re
f
0.78 G
0.5669291338582678 w
42.5196850393700814 785.1970866141731449 510.2406299212597673 -413.8582677165354653 re
S
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 773.8585039370078675 Td
(// lib/db.ts - ACTUALIZAR INTERFACE:) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 754.0159842519684616 Td
(export interface User {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 744.0947244094487587 Td
(  id: string;) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 734.1734645669291695 Td
(  email: string;) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 724.2522047244094665 Td
(  password: string;) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 714.3309448818897636 Td
(  created_at: Date;) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 704.4096850393700606 Td
(  updated_at: Date;) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 694.4884251968503577 Td
(  // NUEVOS CAMPOS:) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 684.5671653543306547 Td
(  monthly_transcription_quota: number;) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 674.6459055118109518 Td
(  transcriptions_used_this_month: number;) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 664.7246456692912489 Td
(  quota_reset_date: Date;) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 654.8033858267716596 Td
(}) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 634.9608661417322537 Td
(// NUEVA FUNCION:) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 625.0396062992125508 Td
(export const UserDB = {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 615.1183464566928478 Td
(  // ... funciones existentes ...) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 595.2758267716535556 Td
(  // Verificar y consumir quota) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 585.3545669291338527 Td
(  consumeQuota: async \(userId: string\): Promise<{) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 575.4333070866141497 Td
(    allowed: boolean;) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 565.5120472440944468 Td
(    remaining: number;) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 555.5907874015747439 Td
(    resetDate: Date;) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 545.6695275590550409 Td
(  }> => {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 535.748267716535338 Td
(    const user = await UserDB.findById\(userId\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 525.827007874015635 Td
(    if \(!user\) {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 515.9057480314959321 Td
(      throw new Error\('Usuario no encontrado'\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 505.9844881889763428 Td
(    }) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 486.1419685039369369 Td
(    // Verificar si necesita reset mensual) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 476.2207086614172908 Td
(    const monthAgo = new Date\(\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 466.2994488188975879 Td
(    monthAgo.setMonth\(monthAgo.getMonth\(\) - 1\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 446.4569291338582389 Td
(    if \(user.quota_reset_date < monthAgo\) {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 436.5356692913385359 Td
(      await sql`) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 426.614409448818833 Td
(        UPDATE users) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 416.69314960629913 Td
(        SET transcriptions_used_this_month = 0,) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 406.7718897637794839 Td
(            quota_reset_date = CURRENT_TIMESTAMP) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 396.850629921259781 Td
(        WHERE id = ${userId}) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 386.929370078740078 Td
(      `;) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
270.9599999999999795 28.3464566929134207 Td
(Pagina 8 de 12) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
42.5196850393700814 28.3464566929134207 Td
(Annalogica - Auditoria Tecnica 2025) Tj
ET
endstream
endobj
19 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 20 0 R
>>
endobj
20 0 obj
<<
/Length 8457
>>
stream
0.5669291338582678 w
0.78 G
BT
/F2 9 Tf
10.3499999999999996 TL
0.275 g
42.5196850393700814 799.3703149606299121 Td
(Uso en API de Procesamiento:) Tj
ET
0.96 g
42.5196850393700814 785.1970866141731449 510.2406299212597673 -413.8582677165354653 re
f
0.78 G
0.5669291338582678 w
42.5196850393700814 785.1970866141731449 510.2406299212597673 -413.8582677165354653 re
S
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 773.8585039370078675 Td
(// app/api/process/route.ts - AGREGAR VERIFICACION:) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 754.0159842519684616 Td
(export async function POST\(request: Request\) {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 744.0947244094487587 Td
(  try {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 734.1734645669291695 Td
(    const user = verifyRequestAuth\(request\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 724.2522047244094665 Td
(    if \(!user\) {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 714.3309448818897636 Td
(      return Response.json\({ error: 'No autorizado' }, { status: 401 }\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 704.4096850393700606 Td
(    }) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 684.5671653543306547 Td
(    // NUEVO: Verificar quota ANTES de procesar) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 674.6459055118109518 Td
(    const quotaCheck = await UserDB.consumeQuota\(user.userId\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 654.8033858267716596 Td
(    if \(!quotaCheck.allowed\) {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 644.8821259842519567 Td
(      return Response.json\({) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 634.9608661417322537 Td
(        error: 'Cuota mensual agotada',) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 625.0396062992125508 Td
(        remaining: quotaCheck.remaining,) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 615.1183464566928478 Td
(        resetDate: quotaCheck.resetDate.toISOString\(\),) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 605.1970866141732586 Td
(        message: 'Has alcanzado tu limite de ' +) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 595.2758267716535556 Td
(                 'transcripciones este mes. Actualiza tu plan o ' +) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 585.3545669291338527 Td
(                 'espera hasta: ' + quotaCheck.resetDate.toLocaleDateString\(\)) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 575.4333070866141497 Td
(      }, { status: 402 }\); // 402 Payment Required) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 565.5120472440944468 Td
(    }) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 545.6695275590550409 Td
(    // ... resto del codigo de procesamiento ...) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 525.827007874015635 Td
(    // En respuesta exitosa, informar quota restante:) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 515.9057480314959321 Td
(    return Response.json\({) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 505.9844881889763428 Td
(      success: true,) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 496.0632283464566399 Td
(      jobId: job.id,) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 486.1419685039369369 Td
(      status: 'pending',) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 476.2207086614172908 Td
(      quotaRemaining: quotaCheck.remaining,) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 466.2994488188975879 Td
(      quotaResetDate: quotaCheck.resetDate) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 456.378188976377885 Td
(    }\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 436.5356692913385359 Td
(  } catch \(error: any\) {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 426.614409448818833 Td
(    console.error\('[API Process] Error:', error\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 416.69314960629913 Td
(    return Response.json\() Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 406.7718897637794839 Td
(      { error: error.message },) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 396.850629921259781 Td
(      { status: 500 }) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 386.929370078740078 Td
(    \);) Tj
ET
BT
/F2 9 Tf
10.3499999999999996 TL
0.275 g
42.5196850393700814 360.0002362204724022 Td
(Cron Job Mensual:) Tj
ET
0.96 g
42.5196850393700814 345.8270078740156919 510.2406299212597673 -413.8582677165354653 re
f
0.78 G
0.5669291338582678 w
42.5196850393700814 345.8270078740156919 510.2406299212597673 -413.8582677165354653 re
S
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 334.4884251968503008 Td
(// Cron job para reset mensual \(vercel.json\):) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 324.5671653543306547 Td
({) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 314.6459055118109518 Td
(  "crons": [) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 304.7246456692912489 Td
(    {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 294.8033858267715459 Td
(      "path": "/api/cron/cleanup",) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 284.882125984251843 Td
(      "schedule": "0 2 * * *") Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 274.9608661417322537 Td
(    },) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 265.0396062992125508 Td
(    {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 255.1183464566928478 Td
(      "path": "/api/cron/reset-quotas",) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 245.1970866141731449 Td
(      "schedule": "0 0 1 * *") Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 235.2758267716534419 Td
(    }) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 225.354566929133739 Td
(  ]) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 215.4333070866141497 Td
(}) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 195.5907874015747439 Td
(// app/api/cron/reset-quotas/route.ts \(NUEVO\):) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 185.6695275590550409 Td
(import { sql } from '@vercel/postgres';) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 165.827007874015635 Td
(export async function GET\(request: Request\) {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 155.9057480314959321 Td
(  const authHeader = request.headers.get\('authorization'\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 136.0632283464566399 Td
(  if \(authHeader !== `Bearer ${process.env.CRON_SECRET}`\) {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 126.1419685039369369 Td
(    return Response.json\({ error: 'Unauthorized' }, { status: 401 }\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 116.220708661417234 Td
(  }) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 96.3781889763778281 Td
(  try {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 86.4569291338581252 Td
(    const result = await sql`) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 76.5356692913385359 Td
(      UPDATE users) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 66.614409448818833 Td
(      SET transcriptions_used_this_month = 0,) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 56.69314960629913 Td
(          quota_reset_date = CURRENT_TIMESTAMP) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
270.9599999999999795 28.3464566929134207 Td
(Pagina 9 de 12) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
42.5196850393700814 28.3464566929134207 Td
(Annalogica - Auditoria Tecnica 2025) Tj
ET
endstream
endobj
21 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 22 0 R
>>
endobj
22 0 obj
<<
/Length 427
>>
stream
0.5669291338582678 w
0.78 G
BT
/F2 9 Tf
10.3499999999999996 TL
0.863 0.208 0.271 rg
42.5196850393700814 799.3703149606299121 Td
(IMPACTO: Alto | PRIORIDAD: CRITICA | TIEMPO: 4 horas) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
268.7599999999999909 28.3464566929134207 Td
(Pagina 10 de 12) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
42.5196850393700814 28.3464566929134207 Td
(Annalogica - Auditoria Tecnica 2025) Tj
ET
endstream
endobj
23 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 24 0 R
>>
endobj
24 0 obj
<<
/Length 7513
>>
stream
0.5669291338582678 w
0.78 G
BT
/F2 16 Tf
18.3999999999999986 TL
1. 0.4 0. rg
42.5196850393700814 799.3703149606299121 Td
(5. OBSERVABILIDAD - PROBLEMA CRITICO #5) Tj
ET
0.78 G
0.8503937007874016 w
42.5196850393700814 772.1577165354329964 m
552.7603149606298985 772.1577165354329964 l
S
BT
/F2 13 Tf
14.9499999999999993 TL
0.863 0.208 0.271 rg
42.5196850393700814 757.9844881889763428 Td
(Sin Sistema de Monitoreo \(Solo console.log\)) Tj
ET
0.78 G
0.8503937007874016 w
42.5196850393700814 735.8742519685039269 m
552.7603149606298985 735.8742519685039269 l
S
BT
/F1 9 Tf
10.3499999999999996 TL
0. g
42.5196850393700814 721.7010236220471597 Td
(RIESGO: Errores criticos no detectados, sin alertas automaticas.) Tj
ET
BT
/F2 9 Tf
10.3499999999999996 TL
0.275 g
42.5196850393700814 694.7718897637795408 Td
(Setup Sentry:) Tj
ET
0.96 g
42.5196850393700814 680.5986614173227736 510.2406299212597673 -36.8503937007874072 re
f
0.78 G
0.5669291338582678 w
42.5196850393700814 680.5986614173227736 510.2406299212597673 -36.8503937007874072 re
S
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 669.2600787401574962 Td
(// Instalar dependencias:) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 659.3388188976377933 Td
(npm install @sentry/nextjs) Tj
ET
BT
/F2 9 Tf
10.3499999999999996 TL
0.275 g
42.5196850393700814 632.4096850393700606 Td
(Configuracion Sentry \(3 archivos\):) Tj
ET
0.96 g
42.5196850393700814 618.2364566929132934 510.2406299212597673 -284.8818897637795544 re
f
0.78 G
0.5669291338582678 w
42.5196850393700814 618.2364566929132934 510.2406299212597673 -284.8818897637795544 re
S
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 606.8978740157480161 Td
(// sentry.client.config.ts \(NUEVO\)) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 596.9766141732283131 Td
(import * as Sentry from "@sentry/nextjs";) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 577.1340944881889072 Td
(Sentry.init\({) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 567.212834645669318 Td
(  dsn: process.env.NEXT_PUBLIC_SENTRY_DSN,) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 557.291574803149615 Td
(  environment: process.env.NODE_ENV,) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 547.3703149606299121 Td
(  tracesSampleRate: 0.1, // 10% de requests) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 537.4490551181102092 Td
(  replaysSessionSampleRate: 0.1,) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 527.5277952755905062 Td
(  replaysOnErrorSampleRate: 1.0,) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 517.6065354330708033 Td
(}\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 497.7640157480314542 Td
(// sentry.server.config.ts \(NUEVO\)) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 487.8427559055117513 Td
(import * as Sentry from "@sentry/nextjs";) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 468.0002362204723454 Td
(Sentry.init\({) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 458.0789763779526993 Td
(  dsn: process.env.NEXT_PUBLIC_SENTRY_DSN,) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 448.1577165354329964 Td
(  environment: process.env.NODE_ENV,) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 438.2364566929132934 Td
(  tracesSampleRate: 0.1,) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 428.3151968503936473 Td
(}\);) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 408.4726771653542414 Td
(// sentry.edge.config.ts \(NUEVO\)) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 398.5514173228345953 Td
(import * as Sentry from "@sentry/nextjs";) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 378.7088976377951894 Td
(Sentry.init\({) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 368.7876377952754865 Td
(  dsn: process.env.NEXT_PUBLIC_SENTRY_DSN,) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 358.8663779527558404 Td
(  tracesSampleRate: 0.1,) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 348.9451181102361375 Td
(}\);) Tj
ET
BT
/F2 9 Tf
10.3499999999999996 TL
0.275 g
42.5196850393700814 322.0159842519684616 Td
(Integracion en Codigo:) Tj
ET
0.96 g
42.5196850393700814 307.8427559055116944 510.2406299212597673 -384.0944881889764133 re
f
0.78 G
0.5669291338582678 w
42.5196850393700814 307.8427559055116944 510.2406299212597673 -384.0944881889764133 re
S
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 296.5041732283464171 Td
(// lib/inngest/functions.ts - AGREGAR ERROR TRACKING:) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 276.6616535433070112 Td
(import * as Sentry from '@sentry/nextjs';) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 256.8191338582676053 Td
(export const transcribeFile = inngest.createFunction\() Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 246.8978740157479024 Td
(  { ... },) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 236.9766141732281994 Td
(  { event: 'task/transcribe' },) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 227.0553543307086102 Td
(  async \({ event, step }\) => {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 217.1340944881889072 Td
(    const { jobId } = event.data;) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 197.2915748031495013 Td
(    try {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 187.3703149606297984 Td
(      // ... codigo existente ...) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 167.5277952755905062 Td
(    } catch \(error: any\) {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 157.6065354330708033 Td
(      // CAPTURAR ERROR EN SENTRY:) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 147.6852755905511003 Td
(      Sentry.captureException\(error, {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 137.7640157480313974 Td
(        tags: {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 127.8427559055116944 Td
(          jobId,) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 117.9214960629919915 Td
(          userId: event.data.userId,) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 108.0002362204724022 Td
(          function: 'transcribeFile') Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 98.0789763779526993 Td
(        },) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 88.1577165354329964 Td
(        contexts: {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 78.2364566929134071 Td
(          job: {) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 68.3151968503937042 Td
(            id: jobId,) Tj
ET
BT
/F5 7 Tf
8.0499999999999989 TL
0.196 g
48.1889763779527627 58.3939370078740012 Td
(            filename: event.data.filename,) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
268.7599999999999909 28.3464566929134207 Td
(Pagina 11 de 12) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
42.5196850393700814 28.3464566929134207 Td
(Annalogica - Auditoria Tecnica 2025) Tj
ET
endstream
endobj
25 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 26 0 R
>>
endobj
26 0 obj
<<
/Length 586
>>
stream
0.5669291338582678 w
0.78 G
BT
/F3 9 Tf
10.3499999999999996 TL
0. g
42.5196850393700814 799.3703149606299121 Td
(CONFIGURACION GRATUITA: 10,000 eventos/mes \(suficiente para inicio\)) Tj
ET
BT
/F2 9 Tf
10.3499999999999996 TL
1. 0.549 0. rg
42.5196850393700814 780.9451181102361943 Td
(IMPACTO: Medio-Alto | PRIORIDAD: ALTA | TIEMPO: 4 horas) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
268.7599999999999909 28.3464566929134207 Td
(Pagina 12 de 12) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
42.5196850393700814 28.3464566929134207 Td
(Annalogica - Auditoria Tecnica 2025) Tj
ET
endstream
endobj
1 0 obj
<</Type /Pages
/Kids [3 0 R 5 0 R 7 0 R 9 0 R 11 0 R 13 0 R 15 0 R 17 0 R 19 0 R 21 0 R 23 0 R 25 0 R ]
/Count 12
>>
endobj
27 0 obj
<<
/Type /Font
/BaseFont /Helvetica
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
28 0 obj
<<
/Type /Font
/BaseFont /Helvetica-Bold
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
29 0 obj
<<
/Type /Font
/BaseFont /Helvetica-Oblique
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
30 0 obj
<<
/Type /Font
/BaseFont /Helvetica-BoldOblique
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
31 0 obj
<<
/Type /Font
/BaseFont /Courier
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
32 0 obj
<<
/Type /Font
/BaseFont /Courier-Bold
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
33 0 obj
<<
/Type /Font
/BaseFont /Courier-Oblique
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
34 0 obj
<<
/Type /Font
/BaseFont /Courier-BoldOblique
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
35 0 obj
<<
/Type /Font
/BaseFont /Times-Roman
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
36 0 obj
<<
/Type /Font
/BaseFont /Times-Bold
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
37 0 obj
<<
/Type /Font
/BaseFont /Times-Italic
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
38 0 obj
<<
/Type /Font
/BaseFont /Times-BoldItalic
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
39 0 obj
<<
/Type /Font
/BaseFont /ZapfDingbats
/Subtype /Type1
/FirstChar 32
/LastChar 255
>>
endobj
40 0 obj
<<
/Type /Font
/BaseFont /Symbol
/Subtype /Type1
/FirstChar 32
/LastChar 255
>>
endobj
2 0 obj
<<
/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]
/Font <<
/F1 27 0 R
/F2 28 0 R
/F3 29 0 R
/F4 30 0 R
/F5 31 0 R
/F6 32 0 R
/F7 33 0 R
/F8 34 0 R
/F9 35 0 R
/F10 36 0 R
/F11 37 0 R
/F12 38 0 R
/F13 39 0 R
/F14 40 0 R
>>
/XObject <<
>>
>>
endobj
41 0 obj
<<
/Producer (jsPDF 3.0.3)
/CreationDate (D:20251010155214+02'00')
>>
endobj
42 0 obj
<<
/Type /Catalog
/Pages 1 0 R
/OpenAction [3 0 R /FitH null]
/PageLayout /OneColumn
>>
endobj
xref
0 43
0000000000 65535 f 
0000053518 00000 n 
0000055415 00000 n 
0000000015 00000 n 
0000000152 00000 n 
0000002051 00000 n 
0000002188 00000 n 
0000009648 00000 n 
0000009785 00000 n 
0000010262 00000 n 
0000010400 00000 n 
0000017803 00000 n 
0000017942 00000 n 
0000025226 00000 n 
0000025365 00000 n 
0000025843 00000 n 
0000025982 00000 n 
0000030697 00000 n 
0000030836 00000 n 
0000035769 00000 n 
0000035908 00000 n 
0000044418 00000 n 
0000044557 00000 n 
0000045036 00000 n 
0000045175 00000 n 
0000052741 00000 n 
0000052880 00000 n 
0000053650 00000 n 
0000053776 00000 n 
0000053907 00000 n 
0000054041 00000 n 
0000054179 00000 n 
0000054303 00000 n 
0000054432 00000 n 
0000054564 00000 n 
0000054700 00000 n 
0000054828 00000 n 
0000054955 00000 n 
0000055084 00000 n 
0000055217 00000 n 
0000055319 00000 n 
0000055668 00000 n 
0000055754 00000 n 
trailer
<<
/Size 43
/Root 42 0 R
/Info 41 0 R
/ID [ <707E42772C0E923F269D4AE0BBA9E4DE> <707E42772C0E923F269D4AE0BBA9E4DE> ]
>>
startxref
55858
%%EOF